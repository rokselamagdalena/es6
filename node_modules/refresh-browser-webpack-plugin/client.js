/**
 * Created by ZSY on 2017/3/26.
 */

function connect() {
  var es = new EventSource('http://' + location.hostname + ':3101/stream');

  es.addEventListener('open', function (e) {
    console.log('[refresh html] connected.');
  });

  es.addEventListener('message', function (e) {
    if (e.data === 'reload') {
      location.reload();
    }
  })
}

if (!window.EventSource) {
  console.warn('your browser not support eventSource api');
} else {
  connect();
}